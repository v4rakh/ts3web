{% extends 'layout.twig' %}

{% block content %}
    <h1 class="header">{{ title }}</h1>

    <h2 class="header">{% trans %}passwords.h.actions{% endtrans %}</h2>

    {% include 'form.twig' with {
        'fields': [
            {
                'header_label': 'passwords.add'|trans,
                'label': '<i class="material-icons">check_circle</i>',
                'uri': '/passwords/add/' ~ sid,
                'uri_method': 'post',
                'fields': [
                    {'type': 'text', 'key': 'password', 'label': 'passwords.add.password'|trans},
                    {'type': 'number', 'key': 'duration', 'label': 'passwords.add.duration'|trans},
                    {'type': 'text', 'key': 'description', 'label': 'passwords.add.description'|trans},
                    {'type': 'select', 'key': 'channel', 'options': channels,'label': 'passwords.add.channel'|trans},
                    {'type': 'text', 'key': 'channel_password', 'label': 'passwords.add.channel_password'|trans},
                ]
            },
        ]
    } %}


    {% if data|length > 0 %}
        <h2 class="header">{% trans %}passwords.h.details{% endtrans %}</h2>
        {% include 'table.twig' with {'data': data,
            'hiddenColumns': ['uid', 'tcpw'],
            'filters': [{'key': 'start', 'apply': 'timestamp'}, {'key': 'end', 'apply': 'timestamp'}],
            'links': [
                {'key': 'tcid', 'uri': '/channels/' ~ sid, 'uri_param': 'tcid'},
            ],
            'attributesEditable': [
                {
                    'key': 'pw_clear',
                    'type': 'text',
                    'uri': '/passwords/delete/' ~ sid,
                    'uri_method': 'post',
                    'submit_label': '<i class="material-icons">delete</i>',
                    'readOnly': true
                }
            ]
        } %}
    {% endif %}
{% endblock %}